/*! <%= pkg.title || pkg.name %> - v<%= pkg.version %> - <%= grunt.template.today("yyyy-mm-dd") %>
<%= pkg.homepage ? "* " + pkg.homepage + "\n" : "" %>* Copyright (c) <%= grunt.template.today("yyyy") %> <%= pkg.author.name %>; Licensed <%= _.pluck(pkg.licenses, "type").join(", ") %> */
;!function(a,b){typeof module!="undefined"?module.exports=b():typeof define=="function"&&define.amd?define(a,b):this.provide?this.provide(a,b()):this[a]=b()}("state",function(){function a(a){var b=this;this.options=a,b.cache={}}return a.fn=a.prototype=Object.create(Array.prototype,{constructor:{value:a,enumerable:!1}}),a.prototype._push=Object(a.prototype.push),a.prototype.push=function(a,b){var c=this;if(this.length>=this.maxSize)throw new Error("MaxSize reached");if(typeof a!="string"&&typeof a!="number")throw new TypeError("(id) must be alphanumeric");if(this.cache[a]&&arguments.length==1)return this.indexOf(a)===-1?this._push(a):this.get(a);arguments.length>2&&[].slice.call(arguments).forEach(function(a){if(c.indexOf(a)==-1)return c._push(a)});if(arguments.length<=1)throw new TypeError("I need two params, yo!");return!this.cache[a]&&!this[a]?(this.cache[a]=b,this._push(a),this):"Already on the kue"},a.prototype.set=function(a,b){return this.cache[a]?(this.cache[a]=b,this):new TypeError("(id) is not in the list")},a.prototype.next=function(a,b){var c,d;return this.cache[a]?c=a:b?(this.cache[a]=b,c=a):c=this.shift(),this.push(c),this.emit("change",this.cache[c],c),this.cache[c]},a.prototype.set=function(a,b){if(this.cache[a]&&b)return this.cache[a]=b;throw new Error("(id) is not in the kue, use push instead")},a.prototype.get=function(a){return this.cache[a]||{}},a.prototype.prev=function(a,b){var c,d;this.cache[a]?c=a:b?(this.cache[a]=b,c=a):c=this.pop(),d=this.splice(0);var e=[c].concat(d);return d.indexOf(c)>-1&&(e=d),this.push.apply(this,e),this.emit("change",this.cache[c],c),this.cache[c]},a.prototype.has=function(a){return this.cache[a]!==undefined},a.prototype.on=function(a,b,c){var d,e,f,g,h;if(!b)return this;a=a.split(/\s+/),d=this._callbacks||(this._callbacks={});while(e=a.shift())h=d[e],f=h?h.tail:{},f.next=g={},f.context=c,f.callback=b,d[e]={tail:g,next:h?h.next:f};return this},a.prototype.emit=function(a){var b,c,d,e,f,g,h;if(!(d=this._callbacks))return this;g=d.all,a=a.split(/\s+/),h=[].slice.call(arguments,1);while(b=a.shift()){if(c=d[b]){e=c.tail;while((c=c.next)!==e)c.callback.apply(c.context||this,h)}if(c=g){e=c.tail,f=[b].concat(h);while((c=c.next)!==e)c.callback.apply(c.context||this,f)}}return this},Object.defineProperties(a.prototype,{maxSize:{get:function(){return this.options.maxSize||Infinity}},interval:{get:function(){return this.options.interval||1}},all:{get:function(){return this.cache}}}),a});!function(a,b){typeof module!="undefined"?module.exports=b():typeof define=="function"&&define.amd?define(a,b):this.provide?this.provide(a,b()):this[a]=b()}("events",function(){function c(a){this.log("Has Changed")}function d(a){}function e(a){a.preventDefault();var b="/api/v1/"+this.level+"/answers",c=this;return this.$.post(b,this.State.all,function(a){return c.emit("ui:done",a)})}function f(a){alert(JSON.stringify(a))}function g(a){}function h(){event.preventDefault();var a=this.active.dataset,b=a.next-2;b<=0&&(b=1),i.call(this,a.sid),this.State.prev(b)}function i(a){var b=this.State.get(a),c=this.$('#question [name="answers"]:checked').next();if(c.data()!==null){var d=c.data().id;b.answer=d,b.answers.map(function(a){return a.checked=!1,a}),b.answers[d].checked=!0}return this.State.set(a,b),b}function j(a){a.preventDefault();var b=a.target,c=this.active.dataset;this.qnext=c.next,i.call(this,c.sid),this.fetchQuestions(c.next)}function k(a){var b=this;b._questions[0].sid=a||0;if(!b._questions[0].id)return;b.$space.html(b.qtemplate(b._questions[0])),b.active=b.$("#question")[0],b.$("#prev").bind("click",b.emit.bind(b,"ui:button:prev")),b.$("#send").bind("click",b.emit.bind(b,"ui:button:send")),b.$("#next").bind("click",b.emit.bind(b,"ui:button:next")),window.Prism&&Prism.highlightAll()}function l(b){this.ready=!0,this.qtemplate=a.template(document.querySelector("#question-tmpl").text)}var a=require("underscore"),b=require("state");return{ready:l,"q:render":k,"q:change":c,"q:answer":d,"q:new":g,"ui:button:prev":h,"ui:button:next":j,"ui:button:send":e,"ui:done":f}});(function(){function f(a){if(!(this instanceof f))return new f(a);b.extend(this,a);var d=this;this.current="Bienvenido",this.parent=this.constructor,this.questions=[],this.$=jQuery,this.$space=this.$("#space"),this.header="[Quiz]",this.State=new c({}),this.State.on("change",function(a,c){a=b.isArray(a)?a:[a],d._questions=a,d.emit("q:render",c)}),window.State=this.State}"use strict";var a=require("backbone"),b=require("underscore"),c=require("state"),d=require("events"),e={home:document.querySelector("#home-tmpl"),question:document.querySelector("#question-tmpl"),answer:document.querySelector("#answer-tmpl")};f.fn=f.prototype={constructor:f,extend:function(a){return b.extend.call(this,this,a)},next:function(){var a={prev:this.current,current:this._questions.shift(),next:this._questions[0]};return this.emit("q:change",a),this.current=a.current,this},fetchQuestions:function(a){a||(a=1);var b=this,c=+(new Date),d="/api/v1/"+this.level+"/question/"+a+".json";if(this.State.has(a))return this.State.next(a);this.$.getJSON(d,function(c,d){return b.ready||b.emit("ready",b.startTime),b.State.next(a,c)})},on:function(a,b,c){var d,e,f,g,h;if(!b)return this;a=a.split(/\s+/),d=this._callbacks||(this._callbacks={});while(e=a.shift())h=d[e],f=h?h.tail:{},f.next=g={},f.context=c,f.callback=b,d[e]={tail:g,next:h?h.next:f};return this},emit:function(a){var b,c,d,e,f,g,h;if(!(d=this._callbacks))return this;g=d.all,a=a.split(/\s+/),h=[].slice.call(arguments,1);while(b=a.shift()){if(c=d[b]){e=c.tail;while((c=c.next)!==e)c.callback.apply(c.context||this,h)}if(c=g){e=c.tail,f=[b].concat(h);while((c=c.next)!==e)c.callback.apply(c.context||this,f)}}return this},init:function(){var a=this;return this.fetchQuestions(),b.each(d,function(b,c){a.on(c,b.bind(a))},this),this.startTime=+(new Date),this},log:function(){if(!this.verbose)return;var a,b,c;try{__fail__.fail()}catch(d){a=d}if(a.stack){var b;a.arguments?(b=a.stack.replace(/^\s+at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}($1)$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}($1)").split("\n"),b.shift()):b=a.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^\(/gm,"{anonymous}(").split("\n"),c="\n    "+b.slice(2).join("\n    ")}console.log([this.header].concat([].slice.call(arguments)).join(" ")),console.info("	"+b.slice(1,2))}},$(document).ready(function(){var a=new f({level:"easy",time:6e5,verbose:!0});a.on("ready",function(b){a.log("Started at "+new Date(b))}).init()})}).call(this);